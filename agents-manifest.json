{
  "version": 1,
  "generated_notice": "<!-- Generated by `python3 scripts/generate_agents.py write`. Edit `agents-manifest.json` instead of editing this file directly. -->",
  "section_order": [
    "Scope",
    "Project Context",
    "Working Approach",
    "Environment and Tooling",
    "Cherri Docs First (Research Workflow)",
    "Cherri-Specific Coding Guidance",
    "Quality Gates (Default)",
    "OpenSpec Workflow (Repo Convention)",
    "Safety",
    "Directory-Specific Guidance",
    "Reference Links (Official Cherri Docs)"
  ],
  "global_sections": {
    "Scope": [
      "This file applies to the whole repository."
    ],
    "Project Context": [
      "- This repository is a Cherri Shortcuts toolkit for modular, maintainable Siri Shortcuts projects.",
      "- Prefer Cherri-native solutions and Cherri documentation over ad hoc Shortcuts assumptions.",
      "- Write in English (UK)."
    ],
    "Working Approach": [
      "- For non-trivial work, start with a short plan and then implement.",
      "- Keep diffs small and reviewable.",
      "- Avoid speculative Cherri syntax or actions; confirm behaviour in official docs first.",
      "- When answering user questions about Cherri, cite the official docs page(s) used."
    ],
    "Environment and Tooling": [
      "- The local environment bootstrap (`.codex/environments/environment.toml`) installs Cherri via Homebrew:",
      "  - `brew tap electrikmilk/cherri`",
      "  - `brew install electrikmilk/cherri/cherri`",
      "- Use the repo's existing tooling and scripts if present; do not add production dependencies without approval."
    ],
    "Cherri Docs First (Research Workflow)": [
      "- Prefer official Cherri docs on `https://www.cherrilang.org/`.",
      "- Prefer Cherri CLI built-in docs for quick lookup when available:",
      "  - `cherri --docs`",
      "  - `cherri --docs=<category>`",
      "  - `cherri --action=<action>`",
      "- If docs are unclear or conflicting, note the uncertainty and cite the pages reviewed."
    ],
    "Cherri-Specific Coding Guidance": [
      "### Compilation and Debugging",
      "",
      "- Compile `.cherri` files with `cherri <file>.cherri`.",
      "- Use `--debug` when troubleshooting compile/runtime issues.",
      "- If building outside macOS, use `--hubsign` to sign with RoutineHub credentials.",
      "",
      "### Variables, Constants, and State",
      "",
      "- Use `@name` for mutable variables.",
      "- Prefer `const` for values that do not change.",
      "- Keep side effects predictable and avoid unnecessary mutable state.",
      "",
      "### Includes, Functions, and Structure",
      "",
      "- Use `#include` for modular code and package imports.",
      "- Include function support before writing functions:",
      "  - `#include 'actions/scripting'`",
      "- Be aware Cherri function scaffolding injects supporting actions at the start of the shortcut; avoid relying on incidental order.",
      "- Use includes to keep shortcuts modular rather than creating monolithic files.",
      "",
      "### Comments and Output",
      "",
      "- Cherri comments are omitted from compiled shortcuts by default.",
      "- Use `--comments` only when you explicitly need comments preserved in the compiled output.",
      "",
      "### Packages",
      "",
      "- Use Cherri's package manager commands for shared code:",
      "  - `cherri --init`",
      "  - `cherri --install <package>`",
      "  - `cherri --packages`",
      "  - `cherri --package <name>`",
      "  - `cherri --tidy`",
      "- Review package trust prompts carefully before installing.",
      "- Keep package includes explicit and committed so builds stay reproducible.",
      "",
      "### Practical Best Practices",
      "",
      "- Prefer `const` over mutable variables when values are fixed.",
      "- Use `nothing()` placeholders when Cherri control-flow syntax requires an action block.",
      "- Avoid large pre-built arrays when a loop or generated values is clearer and cheaper."
    ],
    "Quality Gates (Default)": [
      "- Run the smallest relevant verification after changes:",
      "  - Cherri compile for changed `.cherri` files",
      "  - Existing tests/lint/typecheck/build scripts (if/when added)",
      "- If no automated checks exist, state what was manually verified."
    ],
    "OpenSpec Workflow (Repo Convention)": [
      "- For non-trivial feature work, use the OpenSpec prompts/skills in `.github/prompts/` and `openspec/`.",
      "- Keep proposal, design, specs, and tasks aligned before implementation when using OpenSpec."
    ],
    "Safety": [
      "- Ask before destructive changes (deletions, history rewrites, force pushes).",
      "- Treat secrets as sensitive: do not hard-code keys or tokens."
    ],
    "Reference Links (Official Cherri Docs)": [
      "- Getting Started: https://www.cherrilang.org/getting-started/",
      "- Docs index / CLI docs lookup: https://www.cherrilang.org/docs/",
      "- Includes: https://www.cherrilang.org/language/includes/",
      "- Variables and constants: https://www.cherrilang.org/language/variables/",
      "- Functions: https://www.cherrilang.org/language/functions/",
      "- Packages: https://www.cherrilang.org/language/packages/",
      "- Best practices: https://www.cherrilang.org/language/best-practices/",
      "- Comments: https://www.cherrilang.org/language/comments/"
    ]
  },
  "targets": [
    {
      "path": ".",
      "overrides": {},
      "additions": {}
    },
    {
      "path": ".github",
      "overrides": {
        "Scope": [
          "This file applies to `.github/` and its descendants."
        ]
      },
      "additions": {
        "Directory-Specific Guidance": [
          "- Keep prompt files in `.github/prompts/` concise and task-oriented.",
          "- Preserve prompt filenames and slash-command naming conventions unless the user requests a rename.",
          "- When changing prompt text, prefer minimal edits that keep existing workflow intent intact."
        ]
      }
    },
    {
      "path": "openspec",
      "overrides": {
        "Scope": [
          "This file applies to `openspec/` and its descendants."
        ],
        "OpenSpec Workflow (Repo Convention)": [
          "- Treat `openspec/` as spec source-of-truth material and keep changes deliberate.",
          "- Update proposal/design/spec/tasks artefacts together when scope changes.",
          "- Preserve OpenSpec schema structure and file naming conventions expected by the CLI."
        ]
      },
      "additions": {
        "Directory-Specific Guidance": [
          "- Write OpenSpec artefacts in Markdown with stable section structure so diffs are easy to review.",
          "- Keep requirement language normative (`SHALL`/`MUST`) in spec files and ensure each requirement has at least one scenario."
        ]
      }
    }
  ]
}
